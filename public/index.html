<!DOCTYPE html>
<html lang="en" class="Beast">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Audiowide&family=Bungee&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="./css/nav.css" />
    <link rel="stylesheet" href="./css/home.css" />
    <link rel="stylesheet" href="./css/type.css" />
    <link rel="stylesheet" href="./css/anims.css" />
    <title>Shadawi Home</title>
  </head>

  <!-- BODY -->
  <body>
    <!-- LOADER -->
    <style>
      #loadingScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgb(26, 26, 26);
        color: #ffffff;
        z-index: 10000;
        display: flex;
        flex-direction: column-reverse;
        justify-content: center;
        align-items: center;
      }
      #loadingProgress {
        width: 50%;
        height: 20px;
        background: grey;
        margin-top: 10px;
      }
    </style>
    <div id="loadingScreen">
      <h4>Loading...</h4>
      <div id="loadingProgress">
        <div
          style="
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #de6969, pink);
          "
        ></div>
      </div>
    </div>

    <!-- NAV -->
    <nav class="navbar">
      <img class="logo-mark" src="./images/shadawi-logo-full.png" alt="" />
      <div class="nav-content">
        <a href="index.html">Dashboard</a>
        <a href="gallery.html">Gallery</a>
        <a href="mint.html">Mint</a>
        <a href="creators.html">Creators</a>
      </div>
    </nav>

    <nav class="navbar__mobile">
      <img class="logo-mark" src="./images/shadawi-logo-full.png" alt="" />
      <img
        id="toggleNavButton"
        class="nav-image"
        src="./images/menuIcon.png"
        alt=""
      />
    </nav>

    <div id="sidePanel" class="side-panel">
      <!-- Content of your side panel goes here -->
      <p id="closeBtn">X</p>
      <div class="nav-content">
        <a href="index.html">Dashboard</a>
        <a href="gallery.html">Gallery</a>
        <a href="mint.html">Mint</a>
        <a href="creators.html">Creators</a>
      </div>
      <img class="logo-mark" src="./images/shadawi-logo-full.png" alt="" />
    </div>

    <!-- HERO -->
    <div id="hero" class="section-block">
      <div class="basicTextBox">
        <h2 class="rising-text">
          <span>JOIN THE</span><br />
          <span class="neo1">GALACTIC</span><br />
          <span>BATTLE</span>
        </h2>
        <p>
          Enter the world of Shadawi - Discover 3D specimens powered by Polygon
          blockchain. Collect, Transform, and Battle, Become the ultimate mage.
        </p>
        <div class="button-pair">
          <a href="gallery.html" class="pos-btn">Gallery</a>
          <a href="/dashboard" class="neg-btn">Dashboard ></a>
        </div>
      </div>
    </div>

    <!-- SECTION 1 -->
    <div class="section-block" style="min-height: fit-content">
      <div class="section__content">
        <div class="content__left">
          <!-- Canvas ThreeJs-->
          <img src="./images/fanImage1.png" alt="" style="max-width: 100%" />
        </div>

        <div class="content__right">
          <div class="basicTextBox">
            <div class="basicTextBox">
              <h3>
                <span>A STORYLINE</span>
                <span>MADE FOR</span>
                <span>ADVENTURERS</span>
              </h3>
              <p style="display: flex">
                <img src="./images/patreon-logo.png" alt="" />
                In a universe molded by ancient powers, the key lies within the
                grasp of its wielders...
              </p>
              <div class="button-pair">
                <a
                  href="https://patreon.com/LegendsOfShadawi?utm_medium=unknown&utm_source=join_link&utm_campaign=creatorshare_creator&utm_content=copyLink"
                >
                  Watch Legends Series >
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SECTION 2 -->
    <div class="section-block">
      <div class="section__content rev">
        <div class="content__left">
          <div class="basicTextBox">
            <h2>BUILDS</h2>
            <p>
              We're launching four distinct smart contracts to house our diverse
              ERC721 NFT collection, each customized for a specific Shadawi
              build, to ensure every one operates with its distinct
              functionality
            </p>
            <div class="button-pair">
              <a href="mint.html" class="pos-btn">Mint</a>
              <a
                href="https://shadawi.gitbook.io/shadawi-official-docs"
                class="neg-btn"
                >Documentation ></a
              >
            </div>
          </div>
        </div>

        <div class="content__right">
          <iframe
            id="builds-scene"
            src="https://my.spline.design/cards12-de41ef3cbcaaa1890eddfb3c6667e11f/"
            frameborder="0"
            width="100%"
            height="100%"
          ></iframe>
        </div>
      </div>
    </div>

    <!-- SECTION 3 -->
    <div class="gem-section">
      <div id="gem-canvas-container">
        <canvas id="gem-canvas"></canvas>
      </div>

      <div class="scrolling-content">
        <div class="gems-title">
          <h1>
            <span class="glet">G</span>
            <span class="glet">E</span>
            <span class="glet">M</span>
            <span class="glet">S</span>
          </h1>
        </div>
        <section class="basicTextBox">
          <h2>POWER</h2>
          <p>
            Gems are powerful artifacts that have the ability to speed up
            evolution time of specimen.
          </p>
        </section>

        <section class="basicTextBox">
          <h2>DIVERSE</h2>
          <p>There is a gem for each classification of Shadawi, Take a look.</p>
          <br /><br />
          <h3 id="gemName">BEAST</h3>
          <p id="gemDescription">
            There's a max of 128,000 gems for each class. Once they're gone,
            gems must be burned in order for mining to continue.
          </p>
          <div class="gem-btn-container" style="max-width: 450px">
            <div id="prevGemBtn">
              <img
                class="rising-text"
                src="./images/arrowL.png"
                alt="previous"
              />
            </div>
            <div id="nextGemBtn">
              <img class="rising-text" src="./images/arrowR.png" alt="next" />
            </div>
          </div>
        </section>

        <section class="basicTextBox">
          <h2>LIMITED</h2>
          <p>
            There's a max of 128,000 gems for each class. Once they're gone,
            gems must be burned in order for mining to continue.
          </p>
          <div class="button-pair">
            <a href="mint.html" class="pos-btn">Mint Gems</a>
            <a
              href="https://shadawi.gitbook.io/shadawi-official-docs"
              class="neg-btn"
              >Documentation ></a
            >
          </div>
        </section>
        <br /><br />
      </div>
    </div>

    <!-- SECTION 4 -->
    <div class="bottom-section" style="padding-bottom: 16px">
      <div class="section__content">
        <div class="content__left">
          <div class="basicTextBox">
            <h3>Powered by the Polygon Network</h3>
            <p>
              Only on the purple chain - Where transactions are low so the
              entire world can participate in the Dawi Economy.
            </p>
          </div>
        </div>

        <div class="content__right">
          <div class="image-container">
            <img class="rotating-image" src="./images/polygonLogo.png" alt="" />
          </div>
        </div>
      </div>
    </div>

    <!-- FOOTER -->
    <div id="footer" class="section-block">
      <canvas id="footer-canvas"></canvas>
      <section>
        <div class="basicTextBox">
          <p>
            Our diverse team of innovative artists and developers brings Shadawi
            Universe to life. Merging artistic brilliance with blockchain
            expertise, they craft unique virtual entities and immersive
            metaverse experiences.
          </p>
          <div class="button-pair">
            <a class="neg-btn" href="./creators.html">
              <img src="./images/icon.png" alt="" /> Creators ></a
            >
          </div>
        </div>
      </section>

      <div class="footer-end">
        <br />
        <br />
        <hr style="width: 80%" />
        <div class="footer-links">
          <img class="logo-mark" src="./images/shadawi-logo-full.png" alt="" />
          <div class="social-icons">
            <a href="https://twitter.com/shadawi_nft"
              ><img src="./images/x.png" alt="patreon"
            /></a>
            <a href="https://www.instagram.com/Shadawi_NFT/"
              ><img src="./images/instagram.png" alt="patreon"
            /></a>
            <a
              href="https://patreon.com/LegendsOfShadawi?utm_medium=unknown&utm_source=join_link&utm_campaign=creatorshare_creator&utm_content=copyLink"
              ><img src="./images/patreon-logo.png" alt="patreon"
            /></a>
          </div>
          <div style="width: 100px"></div>
        </div>

        <p style="padding-bottom: 16px">ShadawiÂ® All rights reserved 2024</p>
      </div>
    </div>

    <!-- J A V A S C R I P T -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://threejs.org/build/three.module.js",
          "three/addons/": "https://threejs.org/examples/jsm/"
        }
      }
    </script>

    <!-- NAVBAR -->
    <script src="./js/navbar.js"></script>

    <!-- GEMS HANDLER -->
    <script type="module">
      import * as Scene1 from "./js/initGems.js";
      import * as Scene2 from "./js/initCreators.js";

      Scene1.start();
      Scene2.start();

      // SWAP CLASSES
      var classIndex = 0;
      const classNames = [
        "Divine",
        "Gas",
        "Humanoid",
        "Beast",
        "Fairy",
        "Elemental",
        "Undead",
        "Plant",
      ];

      const classDescriptions = [
        "Celestial, enigmatic being with heavenly traits beyond comprehension.",
        "Gas classified specimen are usually have a body with a fume-like texture.",
        "Bipedal, upright creature capable of walking on two legs.",
        "Animalistic specimen displaying primal traits and instincts.",
        "Petite, magical humanoid often depicted with wings and mischievous tendencies, tied to nature.",
        "Powerful entity embodying the essence of natural elements such as fire, water, earth, or air.",
        "Reanimated, once-deceased entity often associated with immortality, malevolence, or decay.",
        "Organism composed partially or entirely of plant material, exhibiting botanical characteristics and traits.",
      ];

      const prevGemBtn = document.getElementById("prevGemBtn");
      const nextGemBtn = document.getElementById("nextGemBtn");
      prevGemBtn.addEventListener("click", prevGem);
      nextGemBtn.addEventListener("click", nextGem);

      function setOpacity() {
        if (classIndex >= classNames.length - 1) {
          nextGemBtn.style.opacity = ".2";
        } else if (classIndex <= 0) {
          prevGemBtn.style.opacity = ".2";
        } else {
          nextGemBtn.style.opacity = "1";
          prevGemBtn.style.opacity = "1";
        }
      }
      setOpacity();

      function nextGem() {
        classIndex += 1;
        if (classIndex >= classNames.length) {
          classIndex = classNames.length - 1;
          return;
        }

        const gemClass = classNames[classIndex];
        const gemDesc = classDescriptions[classIndex];
        setGemBackground(gemClass);

        // change name in Ui
        setGemDetails(gemClass, gemDesc);

        // change background color
        setGemBackground(gemClass);

        // change gem in 3js

        console.log({ classIndex, gemClass });
        setOpacity();
      }

      function prevGem() {
        classIndex -= 1;
        if (classIndex < 0) {
          classIndex = 0;
          return;
        }

        const gemClass = classNames[classIndex];
        const gemDesc = classDescriptions[classIndex];
        setGemBackground(gemClass);

        // change name in Ui
        setGemDetails(gemClass, gemDesc);

        // change background color
        setGemBackground(gemClass);

        // change gem in 3js

        console.log({ classIndex, gemClass });
        setOpacity();
      }

      function setGemDetails(name, description) {
        const gemName = document.getElementById("gemName");
        const gemDescription = document.getElementById("gemDescription");
        gemName.textContent = name;
        gemDescription.textContent = description;
      }

      function setGemBackground(gemType = "") {
        const element = document.documentElement;

        // Remove any previously appended Monster class
        classNames.forEach((className) => {
          if (element.classList.contains(className)) {
            element.classList.remove(className);
          }
        });

        // Randomly select a class name
        const randomIndex = Math.floor(Math.random() * classNames.length);
        const randomClass = classNames.includes(gemType)
          ? classNames.find((gem) => gem == gemType)
          : classNames[randomIndex];

        // Apply the selected class to the element
        element.classList.add(randomClass);
      }
    </script>

    <!-- LOADER -->
    <script type="module">
      var progression = 0;
      var progressInterval = setInterval(runProgress, 100);

      // Function to monitor the loading of various elements
      function monitorLoadingProgress() {
        console.log("Loading...");

        function pushProgress(amount, dataname) {
          progression += amount;
          if(dataname) console.log("loaded: "+dataname);
        }

        // Create a promise for each image loading
        const imagePromises = Array.from(document.images).map((img) => {
          if (img.complete) {
            console.log("image loaded fast.");
            pushProgress(1);
          } else {
            img.addEventListener("load", pushProgress(1, "img"));
            img.addEventListener("error", pushProgress(0)); // Resolve even if there is an error
          }
        });

        // For Three.js canvases, we assume you have a custom event that fires when loading is done
        const gemCanvas = document.getElementById("gem-canvas");
        gemCanvas.addEventListener("loaded", pushProgress(10, "gem canvas"));
        
        const footerCanvas = document.getElementById("footer-canvas");
        footerCanvas.addEventListener("loaded", pushProgress(10, "footer canvas"));

        // For the iframe, listen for the 'load' event
        const iframe = document.getElementById("builds-scene");
        iframe.addEventListener("load", pushProgress(10, "build scene"));
      }

      // Execute the function with the elements to monitor
      monitorLoadingProgress();

      // Update the progress
      function updateProgressBar(progress) {
        document.querySelector(
          "#loadingProgress > div"
        ).style.width = `${progress}%`;
        if (progress > 98) {
          clearInterval(progressInterval);
          document.getElementById("loadingScreen").style.display = "none";
        }
      }

      async function runProgress() {
        progression += 2;
        updateProgressBar(progression);
      }
    </script>
  </body>
</html>
